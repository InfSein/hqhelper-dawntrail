import{f as T,h as q,aC as B,aW as G,aX as P,aE as W,a0 as X,a as Q,aA as Y,bY as Z,z as H,e as J}from"./index.Bh4IZ4cI.js";import{M as K}from"./MacroViewer.De_SWC86.js";import{C as ee,j as oe}from"./icons.BPYJy1hK.js";import{d as ne,W as ae,k as S,X as te,r as m,e as i,P as U,o as v,R as a,a as u,S as t,Q as o,c as ce,U as p,n as y,Z as g}from"./vendor.Bn-7_sVg.js";const se={class:"title"},re={key:0},le={class:"title"},ie={class:"settings-container"},pe={class:"modal-submit-container"},ue=ne({__name:"ModalCopyAsMacro",props:ae({macroMap:{}},{show:{type:Boolean,required:!0},showModifiers:{}}),emits:["update:show"],setup(h){const d=T(),x=q(),e=S("t"),C=S("funcConfig"),f=te(h,"show"),z=h,b=m(),s=m(""),c=m("singleLine"),_=m(!1),D=[{value:"",label:e("preference.macro_copy_prefix.option.none")},{value:"/e ",label:e("preference.macro_copy_prefix.option.echo")},{value:"/p ",label:e("preference.macro_copy_prefix.option.party")},{value:"/fc ",label:e("preference.macro_copy_prefix.option.free_company")},{value:"/b ",label:e("preference.macro_copy_prefix.option.beginner")}],V=[{value:"singleLine",label:e("preference.macro_generate_mode.option.single_line")},{value:"multiLine",label:e("preference.macro_generate_mode.option.multi_line")}],j=()=>{s.value=C.value.macro_copy_prefix,c.value=C.value.macro_generate_mode},F=i(()=>z.macroMap[c.value]),w=i(()=>F.value.split(`
`).map(l=>s.value+l)),M=i(()=>w.value.join(`
`)),k=i(()=>{switch(s.value){case"/e ":return"#7E7E7E";case"/p ":return"#69E6FF";case"/fc ":return"#ADDCE6";case"/b ":return"#ADD74A";default:return""}}),I=i(()=>{const l=["max-height: 200px;","overflow-y: auto;"];return k.value&&l.push(`color: ${k.value};`),l.join(" ")}),N=i(()=>c.value==="singleLine"?[e("copy_macro.mode.single_line.desc.desc_1"),e("copy_macro.mode.single_line.desc.desc_2")]:[e("copy_macro.mode.multi_line.desc.desc_1"),e("copy_macro.mode.multi_line.desc.desc_2")]),$=async()=>{if(await Z(M.value,b.value)){x.error(e("copy_macro.message.failed"));return}if(_.value){const n=H(d.funcConfig,d.userConfig);n.macro_direct_copy=!0,n.macro_copy_prefix=s.value,n.macro_generate_mode=c.value,d.setFuncConfig(n)}O(),x.success(e("common.message.copy_succeed"))},O=()=>{f.value=!1};return(l,n)=>{const E=P,A=W,L=G,R=X;return v(),U(Y,{show:f.value,"onUpdate:show":n[3]||(n[3]=r=>f.value=r),icon:o(oe),title:o(e)("common.appfunc.copy_macro"),"max-width":"350px",onOnLoad:j},{action:a(()=>[u("div",pe,[t(Q,{type:"primary",icon:o(ee),text:o(e)("common.copy"),tip:o(N),placement:"bottom",onClick:$},null,8,["icon","text","tip"])])]),default:a(()=>[u("div",{class:"wrapper",ref_key:"wrapper",ref:b},[t(B,{id:"marco-preview","title-background-color":"var(--n-color-modal)","content-style":o(I)},{title:a(()=>[u("span",se,p(o(e)("common.preview")),1)]),default:a(()=>[o(c)==="singleLine"?(v(),ce("div",re,p(o(M)),1)):(v(),U(K,{key:1,"macro-lines":o(w),"hide-tabs":"","hide-copy-button":""},null,8,["macro-lines"]))]),_:1},8,["content-style"]),t(B,{id:"marco-settings","title-background-color":"var(--n-color-modal)"},{title:a(()=>[u("span",le,p(o(e)("common.options")),1)]),default:a(()=>[u("div",ie,[t(L,null,{default:a(()=>[t(E,{size:"small"},{default:a(()=>[y(p(o(e)("common.prefix")),1)]),_:1}),t(A,{size:"small",value:o(s),"onUpdate:value":n[0]||(n[0]=r=>g(s)?s.value=r:null),options:D,placeholder:o(e)("copy_macro.text.please_select_macro_prefix")},null,8,["value","placeholder"])]),_:1}),t(L,null,{default:a(()=>[t(E,{size:"small"},{default:a(()=>[y(p(o(e)("common.mode")),1)]),_:1}),t(A,{size:"small",value:o(c),"onUpdate:value":n[1]||(n[1]=r=>g(c)?c.value=r:null),options:V,placeholder:o(e)("copy_macro.text.please_select_macro_mode")},null,8,["value","placeholder"])]),_:1}),t(R,{checked:o(_),"onUpdate:checked":n[2]||(n[2]=r=>g(_)?_.value=r:null)},{default:a(()=>[y(p(o(e)("copy_macro.option.macro_direct_copy")),1)]),_:1},8,["checked"])])]),_:1})],512)]),_:1},8,["show","icon","title"])}}}),ve=J(ue,[["__scopeId","data-v-a64a0d85"]]);export{ve as default};
