import{d as $,W as O,X as M,c as w,S as n,R as u,o as _,a as l,F as y,Y as U,Q as e,k,U as j,P,r as I,w as R,e as W,q,y as B,Z as D}from"./vendor.Bn-7_sVg.js";import{R as V}from"./RouterCard.Dpq9Oswx.js";import{F as z,_ as A,o as J,a as F,b as L,c as X,g as G,d as Q,e as N,f as Y,h as Z,u as H,p as E,M as K,i as T}from"./index.Bh4IZ4cI.js";import{I as ee,S as te}from"./StatisticsPanel.D_oSyrU7.js";import{a2 as oe,p as ae,ag as se}from"./icons.BPYJy1hK.js";import"./CraftStatistics.BuzxVlnZ.js";const ne={class:"card-title-text"},ie={class:"item-selection-container"},le={class:"card-title"},ce={class:"title"},re={class:"item-btn-container"},de={class:"actions"},ue=$({__name:"ItemSelectionPanel",props:{patch:{required:!0},patchModifiers:{},itemSelected:{required:!0},itemSelectedModifiers:{}},emits:O(["joinWorkflow"],["update:patch","update:itemSelected"]),setup(g,{emit:p}){const s=k("t"),f=M(g,"patch"),c=M(g,"itemSelected"),S=p,b=()=>{for(const x in c.value)c.value[x]=0},o=()=>{S("joinWorkflow")};return(x,m)=>{const h=X,r=L,v=A;return _(),w("div",null,[n(z,{"card-key":"ft-item-selection"},{header:u(()=>[m[1]||(m[1]=l("i",{class:"xiv square-1"},null,-1)),l("span",ne,j(e(s)("fchelper.select_fashion_cloth")),1)]),default:u(()=>[n(v,{value:f.value,"onUpdate:value":m[0]||(m[0]=d=>f.value=d),type:"line",animated:""},{default:u(()=>[(_(!0),w(y,null,U(e(J),(d,a)=>(_(),P(r,{key:"FashionClothes-"+a,name:a,tab:e(s)("common.patch_x",a),disabled:!d.length},{default:u(()=>[l("div",ie,[n(h,{size:"small"},{header:u(()=>[l("div",le,[n(Q,{size:16,src:"./image/game-job/companion/weaver.png"}),l("span",ce,j(e(s)("common.fashion_cloth")),1)])]),default:u(()=>[l("div",re,[(_(!0),w(y,null,U(d,(t,C)=>(_(),P(ee,{class:"item",key:`item-${a}-${C}`,"item-info":e(G)(t),value:c.value[t],"onUpdate:value":i=>c.value[t]=i},null,8,["item-info","value","onUpdate:value"]))),128))])]),_:2},1024)])]),_:2},1032,["name","tab","disabled"]))),128))]),_:1},8,["value"]),l("div",de,[n(F,{icon:e(oe),text:e(s)("workflow.text.join_in_workflow"),tip:e(s)("workflow.text.join_selected_fashion_clothes_in_workflow"),onClick:o},null,8,["icon","text","tip"]),n(F,{icon:e(ae),text:e(s)("common.clear"),tip:e(s)("fc_helper.tooltip.clear_selected"),onClick:b},null,8,["icon","text","tip"])])]),_:1})])}}}),_e=N(ue,[["__scopeId","data-v-cc412a08"]]),me={id:"main-container"},pe={id:"left-layout"},fe={id:"right-layout"},he=$({__name:"FashionClothesPage",setup(g){const p=k("t"),s=k("userConfig"),f=k("appMode")??I(""),c=Y(),S=Z(),{calItems:b}=H(),o=I(E());if(!(s.value.disable_workstate_cache??!1)){const a=s.value.fashioncloth_cache_work_state;a&&JSON.stringify(a).length>2&&(o.value=E(a)),R(o,async()=>{if(o.value&&s)try{await Promise.resolve(),s.value.fashioncloth_cache_work_state=o.value,c.setUserConfig(s.value)}catch(t){console.error("Error handling workState change:",t)}else console.warn("workState or userConfig is not defined")},{deep:!0})}(()=>{Object.values(J).forEach(a=>{a.forEach(t=>{o.value.itemSelected[t]??=0})})})();const h=W(()=>b(o.value.itemSelected)),r=I(!1),v=W(()=>{const a={};return Object.values(h.value.ls).forEach(t=>{a[t.id]=t.need}),a}),d=()=>{if(!Object.values(v.value).length){S.error(p("workflow.join_in_workflow.message.no_fashion_cloth"));return}r.value=!0};return(a,t)=>{const C=T;return _(),w("div",me,[q(n(V,{id:"router-card","page-name":e(p)("common.appfunc.fchelper"),"page-icon":e(se)},null,8,["page-name","page-icon"]),[[B,e(f)!=="overlay"]]),l("div",pe,[n(_e,{patch:e(o).patch,"onUpdate:patch":t[0]||(t[0]=i=>e(o).patch=i),"item-selected":e(o).itemSelected,"onUpdate:itemSelected":t[1]||(t[1]=i=>e(o).itemSelected=i),onJoinWorkflow:d},null,8,["patch","item-selected"])]),l("div",fe,[n(te,{"hide-precraft-materials":e(o).hidePrecraftMaterials,"onUpdate:hidePrecraftMaterials":t[2]||(t[2]=i=>e(o).hidePrecraftMaterials=i),statistics:e(h),"item-selected":e(o).itemSelected},null,8,["hide-precraft-materials","statistics","item-selected"])]),n(K,{show:e(r),"onUpdate:show":t[3]||(t[3]=i=>D(r)?r.value=i:null),items:e(v)},null,8,["show","items"]),n(C)])}}}),xe=N(he,[["__scopeId","data-v-79f2b694"]]);export{xe as default};
