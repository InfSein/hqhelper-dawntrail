import{d as F,W as R,X as M,c as w,U as l,R as _,o as m,a as i,F as y,Y as j,P as U,L as B,Q as e,k as p,V as P,r as x,w as V,e as W,q as z,y as D,Z as L}from"./vendor.DOOPojup.js";import{R as A}from"./RouterCard.Cx2UkE-r.js";import{_ as X,a as G,b as Q,g as Y,c as Z,d as H,p as J,e as $,f as q,h as K,i as T,u as ee,q as E,M as te,j as oe}from"./index.DIpgTaJR.js";import{I as ae,S as se}from"./StatisticsPanel.O_-ZiVjP.js";import{J as ne,p as le,af as ie}from"./icons._F9tMcs6.js";import"./CraftStatistics.CxK9Etq4.js";const ce={class:"card-title-text"},re={class:"item-selection-container"},de={class:"card-title"},ue={class:"title"},_e={class:"item-btn-container"},me={class:"actions"},pe=F({__name:"ItemSelectionPanel",props:{patch:{required:!0},patchModifiers:{},itemSelected:{required:!0},itemSelectedModifiers:{}},emits:R(["joinWorkflow"],["update:patch","update:itemSelected"]),setup(k,{emit:f}){const a=p("t"),g=p("userConfig"),h=M(k,"patch"),r=M(k,"itemSelected"),S=f,o=()=>{for(const b in r.value)r.value[b]=0},I=()=>{S("joinWorkflow")};return(b,c)=>{const d=Q,v=H,C=G,s=X;return m(),w("div",null,[l(s,{"card-key":"ft-item-selection"},{header:_(()=>[c[1]||(c[1]=i("i",{class:"xiv square-1"},null,-1)),i("span",ce,P(e(a)("fchelper.select_fashion_cloth")),1)]),default:_(()=>[l(C,{value:h.value,"onUpdate:value":c[0]||(c[0]=t=>h.value=t),type:"line",animated:""},{default:_(()=>[(m(!0),w(y,null,j(e(J),(t,u)=>(m(),U(v,{key:"FashionClothes-"+u,name:u,tab:e(a)("common.patch_x",u),disabled:!t.length},{default:_(()=>[i("div",re,[l(d,{size:"small",class:B(e(g).custom_background?"glasscard smallcard":"")},{header:_(()=>[i("div",de,[l(Z,{size:16,src:"./image/game-job/companion/weaver.png"}),i("span",ue,P(e(a)("common.fashion_cloth")),1)])]),default:_(()=>[i("div",_e,[(m(!0),w(y,null,j(t,(n,N)=>(m(),U(ae,{class:"item",key:`item-${u}-${N}`,"item-info":e(Y)(n),value:r.value[n],"onUpdate:value":O=>r.value[n]=O},null,8,["item-info","value","onUpdate:value"]))),128))])]),_:2},1032,["class"])])]),_:2},1032,["name","tab","disabled"]))),128))]),_:1},8,["value"]),i("div",me,[l($,{icon:e(ne),text:e(a)("workflow.text.join_in_workflow"),tip:e(a)("workflow.text.join_selected_fashion_clothes_in_workflow"),onClick:I},null,8,["icon","text","tip"]),l($,{icon:e(le),text:e(a)("common.clear"),tip:e(a)("fc_helper.tooltip.clear_selected"),onClick:o},null,8,["icon","text","tip"])])]),_:1})])}}}),fe=q(pe,[["__scopeId","data-v-d99ae02a"]]),he={id:"main-container"},ve={id:"left-layout"},we={id:"right-layout"},ke=F({__name:"FashionClothesPage",setup(k){const f=p("t"),a=p("userConfig"),g=p("appMode")??x(""),h=K(),r=T(),{calItems:S}=ee(),o=x(E());if(!(a.value.disable_workstate_cache??!1)){const s=a.value.fashioncloth_cache_work_state;s&&JSON.stringify(s).length>2&&(o.value=E(s)),V(o,async()=>{if(o.value&&a)try{await Promise.resolve(),a.value.fashioncloth_cache_work_state=o.value,h.setUserConfig(a.value)}catch(t){console.error("Error handling workState change:",t)}else console.warn("workState or userConfig is not defined")},{deep:!0})}(()=>{Object.values(J).forEach(s=>{s.forEach(t=>{o.value.itemSelected[t]??=0})})})();const c=W(()=>S(o.value.itemSelected)),d=x(!1),v=W(()=>{const s={};return Object.values(c.value.ls).forEach(t=>{s[t.id]=t.need}),s}),C=()=>{if(!Object.values(v.value).length){r.error(f("workflow.join_in_workflow.message.no_fashion_cloth"));return}d.value=!0};return(s,t)=>{const u=oe;return m(),w("div",he,[z(l(A,{id:"router-card","page-name":e(f)("common.appfunc.fchelper"),"page-icon":e(ie)},null,8,["page-name","page-icon"]),[[D,e(g)!=="overlay"]]),i("div",ve,[l(fe,{patch:e(o).patch,"onUpdate:patch":t[0]||(t[0]=n=>e(o).patch=n),"item-selected":e(o).itemSelected,"onUpdate:itemSelected":t[1]||(t[1]=n=>e(o).itemSelected=n),onJoinWorkflow:C},null,8,["patch","item-selected"])]),i("div",we,[l(se,{"hide-precraft-materials":e(o).hidePrecraftMaterials,"onUpdate:hidePrecraftMaterials":t[2]||(t[2]=n=>e(o).hidePrecraftMaterials=n),statistics:e(c),"item-selected":e(o).itemSelected},null,8,["hide-precraft-materials","statistics","item-selected"])]),l(te,{show:e(d),"onUpdate:show":t[3]||(t[3]=n=>L(d)?d.value=n:null),items:e(v)},null,8,["show","items"]),l(u)])}}}),Me=q(ke,[["__scopeId","data-v-79f2b694"]]);export{Me as default};
