import{d as J,W as R,X as M,c as w,U as n,R as u,o as _,a as i,F as y,Y as U,P as j,L as q,Q as e,k as p,V as P,r as x,w as B,e as W,q as V,y as z,Z as D}from"./vendor.DaGD8wRy.js";import{R as L}from"./RouterCard.DxpOtYU3.js";import{F as A,_ as X,a as G,g as Q,b as Y,c as Z,o as $,d as F,e as N,f as H,h as K,u as T,p as E,M as ee,i as te}from"./index.jFBapjE6.js";import{I as oe,S as ae}from"./StatisticsPanel.2cSww6RI.js";import{J as se,p as ne,af as le}from"./icons.BN6_TYLH.js";import"./CraftStatistics.C38niEE1.js";const ie={class:"card-title-text"},ce={class:"item-selection-container"},re={class:"card-title"},de={class:"title"},ue={class:"item-btn-container"},_e={class:"actions"},me=J({__name:"ItemSelectionPanel",props:{patch:{required:!0},patchModifiers:{},itemSelected:{required:!0},itemSelectedModifiers:{}},emits:R(["joinWorkflow"],["update:patch","update:itemSelected"]),setup(k,{emit:f}){const s=p("t"),g=p("userConfig"),h=M(k,"patch"),r=M(k,"itemSelected"),S=f,o=()=>{for(const b in r.value)r.value[b]=0},I=()=>{S("joinWorkflow")};return(b,c)=>{const d=G,v=Z,C=X;return _(),w("div",null,[n(A,{"card-key":"ft-item-selection"},{header:u(()=>[c[1]||(c[1]=i("i",{class:"xiv square-1"},null,-1)),i("span",ie,P(e(s)("fchelper.select_fashion_cloth")),1)]),default:u(()=>[n(C,{value:h.value,"onUpdate:value":c[0]||(c[0]=a=>h.value=a),type:"line",animated:""},{default:u(()=>[(_(!0),w(y,null,U(e($),(a,t)=>(_(),j(v,{key:"FashionClothes-"+t,name:t,tab:e(s)("common.patch_x",t),disabled:!a.length},{default:u(()=>[i("div",ce,[n(d,{size:"small",class:q(e(g).custom_background?"glasscard smallcard":"")},{header:u(()=>[i("div",re,[n(Y,{size:16,src:"./image/game-job/companion/weaver.png"}),i("span",de,P(e(s)("common.fashion_cloth")),1)])]),default:u(()=>[i("div",ue,[(_(!0),w(y,null,U(a,(m,l)=>(_(),j(oe,{class:"item",key:`item-${t}-${l}`,"item-info":e(Q)(m),value:r.value[m],"onUpdate:value":O=>r.value[m]=O},null,8,["item-info","value","onUpdate:value"]))),128))])]),_:2},1032,["class"])])]),_:2},1032,["name","tab","disabled"]))),128))]),_:1},8,["value"]),i("div",_e,[n(F,{icon:e(se),text:e(s)("workflow.text.join_in_workflow"),tip:e(s)("workflow.text.join_selected_fashion_clothes_in_workflow"),onClick:I},null,8,["icon","text","tip"]),n(F,{icon:e(ne),text:e(s)("common.clear"),tip:e(s)("fc_helper.tooltip.clear_selected"),onClick:o},null,8,["icon","text","tip"])])]),_:1})])}}}),pe=N(me,[["__scopeId","data-v-5ebbe500"]]),fe={id:"main-container"},he={id:"left-layout"},ve={id:"right-layout"},we=J({__name:"FashionClothesPage",setup(k){const f=p("t"),s=p("userConfig"),g=p("appMode")??x(""),h=H(),r=K(),{calItems:S}=T(),o=x(E());if(!(s.value.disable_workstate_cache??!1)){const a=s.value.fashioncloth_cache_work_state;a&&JSON.stringify(a).length>2&&(o.value=E(a)),B(o,async()=>{if(o.value&&s)try{await Promise.resolve(),s.value.fashioncloth_cache_work_state=o.value,h.setUserConfig(s.value)}catch(t){console.error("Error handling workState change:",t)}else console.warn("workState or userConfig is not defined")},{deep:!0})}(()=>{Object.values($).forEach(a=>{a.forEach(t=>{o.value.itemSelected[t]??=0})})})();const c=W(()=>S(o.value.itemSelected)),d=x(!1),v=W(()=>{const a={};return Object.values(c.value.ls).forEach(t=>{a[t.id]=t.need}),a}),C=()=>{if(!Object.values(v.value).length){r.error(f("workflow.join_in_workflow.message.no_fashion_cloth"));return}d.value=!0};return(a,t)=>{const m=te;return _(),w("div",fe,[V(n(L,{id:"router-card","page-name":e(f)("common.appfunc.fchelper"),"page-icon":e(le)},null,8,["page-name","page-icon"]),[[z,e(g)!=="overlay"]]),i("div",he,[n(pe,{patch:e(o).patch,"onUpdate:patch":t[0]||(t[0]=l=>e(o).patch=l),"item-selected":e(o).itemSelected,"onUpdate:itemSelected":t[1]||(t[1]=l=>e(o).itemSelected=l),onJoinWorkflow:C},null,8,["patch","item-selected"])]),i("div",ve,[n(ae,{"hide-precraft-materials":e(o).hidePrecraftMaterials,"onUpdate:hidePrecraftMaterials":t[2]||(t[2]=l=>e(o).hidePrecraftMaterials=l),statistics:e(c),"item-selected":e(o).itemSelected},null,8,["hide-precraft-materials","statistics","item-selected"])]),n(ee,{show:e(d),"onUpdate:show":t[3]||(t[3]=l=>D(d)?d.value=l:null),items:e(v)},null,8,["show","items"]),n(m)])}}}),Ie=N(we,[["__scopeId","data-v-79f2b694"]]);export{Ie as default};
