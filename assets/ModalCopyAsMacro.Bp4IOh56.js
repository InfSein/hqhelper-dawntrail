import{f as T,h as q,aD as A,aY as G,aZ as P,aF as Z,a1 as Q,d as W,aB as X,b_ as Y,z as H,e as J}from"./index.DjNjFiam.js";import{M as K}from"./MacroViewer.DGAv4XhS.js";import{C as ee,j as oe}from"./icons.BN6_TYLH.js";import{d as ne,W as ae,k as D,X as te,r as m,e as i,P as S,o as v,R as a,a as u,U as t,Q as o,c as se,V as p,n as y,Z as g}from"./vendor.DaGD8wRy.js";const ce={class:"title"},re={key:0},le={class:"title"},ie={class:"settings-container"},pe={class:"modal-submit-container"},ue=ne({__name:"ModalCopyAsMacro",props:ae({macroMap:{}},{show:{type:Boolean,required:!0},showModifiers:{}}),emits:["update:show"],setup(h){const d=T(),x=q(),e=D("t"),C=D("funcConfig"),f=te(h,"show"),U=h,w=m(),c=m(""),s=m("singleLine"),_=m(!1),V=[{value:"",label:e("preference.macro_copy_prefix.option.none")},{value:"/e ",label:e("preference.macro_copy_prefix.option.echo")},{value:"/p ",label:e("preference.macro_copy_prefix.option.party")},{value:"/fc ",label:e("preference.macro_copy_prefix.option.free_company")},{value:"/b ",label:e("preference.macro_copy_prefix.option.beginner")}],z=[{value:"singleLine",label:e("preference.macro_generate_mode.option.single_line")},{value:"multiLine",label:e("preference.macro_generate_mode.option.multi_line")}],F=()=>{c.value=C.value.macro_copy_prefix,s.value=C.value.macro_generate_mode},j=i(()=>U.macroMap[s.value]),b=i(()=>j.value.split(`\r
`).map(l=>c.value+l)),M=i(()=>b.value.join(`\r
`)),k=i(()=>{switch(c.value){case"/e ":return"#7E7E7E";case"/p ":return"#69E6FF";case"/fc ":return"#ADDCE6";case"/b ":return"#ADD74A";default:return""}}),I=i(()=>{const l=["max-height: 200px;","overflow-y: auto;"];return k.value&&l.push(`color: ${k.value};`),l.join(" ")}),N=i(()=>s.value==="singleLine"?[e("copy_macro.mode.single_line.desc.desc_1"),e("copy_macro.mode.single_line.desc.desc_2")]:[e("copy_macro.mode.multi_line.desc.desc_1"),e("copy_macro.mode.multi_line.desc.desc_2")]),$=async()=>{if(await Y(M.value,w.value)){x.error(e("copy_macro.message.failed"));return}if(_.value){const n=H(d.funcConfig,d.userConfig);n.macro_direct_copy=!0,n.macro_copy_prefix=c.value,n.macro_generate_mode=s.value,d.setFuncConfig(n)}O(),x.success(e("common.message.copy_succeed"))},O=()=>{f.value=!1};return(l,n)=>{const E=P,B=Z,L=G,R=Q;return v(),S(X,{show:f.value,"onUpdate:show":n[3]||(n[3]=r=>f.value=r),icon:o(oe),title:o(e)("common.appfunc.copy_macro"),"max-width":"350px",onOnLoad:F},{action:a(()=>[u("div",pe,[t(W,{type:"primary",icon:o(ee),text:o(e)("common.copy"),tip:o(N),placement:"bottom",onClick:$},null,8,["icon","text","tip"])])]),default:a(()=>[u("div",{class:"wrapper",ref_key:"wrapper",ref:w},[t(A,{id:"marco-preview","content-style":o(I)},{title:a(()=>[u("span",ce,p(o(e)("common.preview")),1)]),default:a(()=>[o(s)==="singleLine"?(v(),se("div",re,p(o(M)),1)):(v(),S(K,{key:1,"macro-lines":o(b),"hide-tabs":"","hide-copy-button":""},null,8,["macro-lines"]))]),_:1},8,["content-style"]),t(A,{id:"marco-settings"},{title:a(()=>[u("span",le,p(o(e)("common.options")),1)]),default:a(()=>[u("div",ie,[t(L,null,{default:a(()=>[t(E,{size:"small"},{default:a(()=>[y(p(o(e)("common.prefix")),1)]),_:1}),t(B,{size:"small",value:o(c),"onUpdate:value":n[0]||(n[0]=r=>g(c)?c.value=r:null),options:V,placeholder:o(e)("copy_macro.text.please_select_macro_prefix")},null,8,["value","placeholder"])]),_:1}),t(L,null,{default:a(()=>[t(E,{size:"small"},{default:a(()=>[y(p(o(e)("common.mode")),1)]),_:1}),t(B,{size:"small",value:o(s),"onUpdate:value":n[1]||(n[1]=r=>g(s)?s.value=r:null),options:z,placeholder:o(e)("copy_macro.text.please_select_macro_mode")},null,8,["value","placeholder"])]),_:1}),t(R,{checked:o(_),"onUpdate:checked":n[2]||(n[2]=r=>g(_)?_.value=r:null)},{default:a(()=>[y(p(o(e)("copy_macro.option.macro_direct_copy")),1)]),_:1},8,["checked"])])]),_:1})],512)]),_:1},8,["show","icon","title"])}}}),ve=J(ue,[["__scopeId","data-v-a5aba7c4"]]);export{ve as default};
