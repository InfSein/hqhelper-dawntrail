import{h as q,i as G,aD as P,bS as z,bT as Q,aF as W,a1 as X,e as Z,aB as H,c0 as J,A as K,f as Y}from"./index.DIpgTaJR.js";import{M as ee}from"./MacroViewer.BR4fb-vu.js";import{C as oe,j as ne}from"./icons._F9tMcs6.js";import{d as ae,W as te,k as B,X as ce,r as _,e as s,P as L,o as v,R as a,a as p,U as t,Q as o,c as se,V as u,Z as y,n as re}from"./vendor.DOOPojup.js";const le={class:"title"},ie={key:0},pe={class:"title"},me={class:"settings-container"},_e={class:"modal-submit-container"},ue=ae({__name:"ModalCopyAsMacro",props:te({macroMap:{}},{show:{type:Boolean,required:!0},showModifiers:{}}),emits:["update:show"],setup(g){const d=q(),h=G(),e=B("t"),x=B("funcConfig"),f=ce(g,"show"),F=g,C=_(),r=_(""),c=_("singleLine"),m=_(!1),S=s(()=>[{value:"",label:e("preference.macro_copy_prefix.option.none")},{value:"/e ",label:e("preference.macro_copy_prefix.option.echo")},{value:"/p ",label:e("preference.macro_copy_prefix.option.party")},{value:"/fc ",label:e("preference.macro_copy_prefix.option.free_company")},{value:"/b ",label:e("preference.macro_copy_prefix.option.beginner")}]),D=s(()=>[{value:"singleLine",label:e("preference.macro_generate_mode.option.single_line")},{value:"multiLine",label:e("preference.macro_generate_mode.option.multi_line")}]),U=()=>{r.value=x.value.macro_copy_prefix,c.value=x.value.macro_generate_mode},V=s(()=>F.macroMap[c.value]),b=s(()=>V.value.split(`\r
`).map(i=>r.value+i)),w=s(()=>b.value.join(`\r
`)),M=s(()=>{switch(r.value){case"/e ":return"#7E7E7E";case"/p ":return"#69E6FF";case"/fc ":return"#ADDCE6";case"/b ":return"#ADD74A";default:return""}}),I=s(()=>{const i=["max-height: 200px;","overflow-y: auto;"];return M.value&&i.push(`color: ${M.value};`),i.join(" ")}),$=s(()=>c.value==="singleLine"?[e("copy_macro.mode.single_line.desc.desc_1"),e("copy_macro.mode.single_line.desc.desc_2")]:[e("copy_macro.mode.multi_line.desc.desc_1"),e("copy_macro.mode.multi_line.desc.desc_2")]),j=async()=>{if(await J(w.value,C.value)){h.error(e("copy_macro.message.failed"));return}if(m.value){const n=K(d.funcConfig,d.userConfig);n.macro_direct_copy=!0,n.macro_copy_prefix=r.value,n.macro_generate_mode=c.value,d.setFuncConfig(n)}N(),h.success(e("common.message.copy_succeed"))},N=()=>{f.value=!1};return(i,n)=>{const k=P,E=W,A=Q,T=z,O=X,R=H;return v(),L(R,{show:f.value,"onUpdate:show":n[3]||(n[3]=l=>f.value=l),icon:o(ne),title:o(e)("common.appfunc.copy_macro"),"max-width":"350px",onOnLoad:U},{action:a(()=>[p("div",_e,[t(Z,{type:"primary",icon:o(oe),text:o(e)("common.copy"),tip:o($),placement:"bottom",onClick:j},null,8,["icon","text","tip"])])]),default:a(()=>[p("div",{class:"wrapper",ref_key:"wrapper",ref:C},[t(k,{id:"marco-preview","content-style":o(I)},{title:a(()=>[p("span",le,u(o(e)("common.preview")),1)]),default:a(()=>[o(c)==="singleLine"?(v(),se("div",ie,u(o(w)),1)):(v(),L(ee,{key:1,"macro-lines":o(b),"hide-tabs":"","hide-copy-button":""},null,8,["macro-lines"]))]),_:1},8,["content-style"]),t(k,{id:"marco-settings"},{title:a(()=>[p("span",pe,u(o(e)("common.options")),1)]),default:a(()=>[p("div",me,[t(T,{size:"small"},{default:a(()=>[t(A,{label:o(e)("common.prefix")},{default:a(()=>[t(E,{value:o(r),"onUpdate:value":n[0]||(n[0]=l=>y(r)?r.value=l:null),options:o(S),placeholder:o(e)("copy_macro.text.please_select_macro_prefix")},null,8,["value","options","placeholder"])]),_:1},8,["label"]),t(A,{label:o(e)("common.mode")},{default:a(()=>[t(E,{value:o(c),"onUpdate:value":n[1]||(n[1]=l=>y(c)?c.value=l:null),options:o(D),placeholder:o(e)("copy_macro.text.please_select_macro_mode")},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),t(O,{checked:o(m),"onUpdate:checked":n[2]||(n[2]=l=>y(m)?m.value=l:null)},{default:a(()=>[re(u(o(e)("copy_macro.option.macro_direct_copy")),1)]),_:1},8,["checked"])])]),_:1})],512)]),_:1},8,["show","icon","title"])}}}),ge=Y(ue,[["__scopeId","data-v-dec68ed9"]]);export{ge as default};
